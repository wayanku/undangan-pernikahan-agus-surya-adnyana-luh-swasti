



<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Metatah - Ni Made Ayu Handayani</title>

    <!-- [KREASI BARU] Favicon dan Meta Tags untuk Social Media (WhatsApp, dll.) -->
    <link rel="icon" href="https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressjpeg/DSC01507-min.jpeg" type="image/jpeg">
    <meta property="og:title" content="Undangan Metatah: Ni Made Ayu Handayani">
    <meta property="og:description" content="Jumat, 3 Oktober 2025 | 16.00 WITA - Selesai |  jln trengguli no 29, Penatih, Denpasar Timur
Jam: 16.00 WITA Undangan upacara potong gigi Ni Made Ayu Handayani.">
    <!-- Ganti URL gambar ini dengan gambar yang ingin Anda tampilkan di WhatsApp -->
    <meta property="og:image" content="" id="meta-og-image">
    <!-- Ganti URL ini dengan URL website Anda setelah di-hosting -->
    <meta property="og:url" content="https://URL-UNDANGAN-ANDA.com">
    <meta property="og:type" content="website">

    <!-- IMPORT FONT KUSTOM -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Upright:wght@400;600;700&family=Pinyon+Script&family=Source+Serif+4:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --color-gold: #B59A75;
            --color-green: #6B7D69;
            --color-dark-green: #5A6B58;
            --color-background: #FFFFFF;
            --color-text: #4a4a4a;
            --color-off-white: #FBFBF8;
            --font-display: 'Cormorant Upright', serif; /* Tetap untuk judul artistik */
            --font-body: 'Source Serif 4', serif; /* Font baru yang lebih mudah dibaca */
            --font-nama: 'Pinyon Script', cursive;
        }

        *, *::before, *::after { box-sizing: border-box; }

        html, body { 
            max-width: 100vw; /* Gunakan vw untuk viewport width */
            /* Kunci utama: Terapkan overflow-x: hidden untuk mencegah scroll horizontal */
            overflow-x: hidden; 
        }

        body {
            margin: 0; padding: 0;
            font-family: var(--font-body);
            background-color: var(--color-background);
            color: var(--color-text);
            background: linear-gradient(175deg, var(--color-background) 0%, var(--color-off-white) 100%);
        }

        /* --- ANIMASI --- */
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes fade-in-out {
            0% { opacity: 0; transform: scale(1.05); } 15% { opacity: 1; transform: scale(1); }
            33% { opacity: 1; transform: scale(1); } 48% { opacity: 0; transform: scale(1); } 100% { opacity: 0; }
        }
        /* [KREASI] Animasi baru untuk tombol Buka Undangan */
        @keyframes shine {
            0%, 100% { box-shadow: 0 0 10px rgba(255,255,255,0.1), 0 0 20px rgba(255,255,255,0.1); }
            50% { box-shadow: 0 0 20px rgba(255,255,255,0.4), 0 0 40px rgba(255,255,255,0.2); }
        }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(107, 125, 105, 0.4); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(107, 125, 105, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(107, 125, 105, 0); }
        }

        /* --- PERUBAHAN ANIMASI INTI --- */
        .hidden { 
            opacity: 0;
            /* 
             * Transisi ini akan berlaku untuk kedua state: saat kelas .visible ditambahkan (animasi masuk)
             * dan saat kelas .visible dihapus (animasi keluar).
             */
            transition: opacity 0.6s cubic-bezier(0.25, 0.1, 0.25, 1), transform 0.6s cubic-bezier(0.25, 0.1, 0.25, 1);
            transition-delay: var(--delay, 0s);
        }
        .anim-fade-in-up { transform: translateY(30px); }
        .anim-zoom-in { transform: scale(0.9); }
        .anim-slide-from-left { transform: translateX(-50px); }
        .anim-slide-from-right { transform: translateX(50px); }
        .visible { opacity: 1; transform: translateY(0) scale(1) translateX(0); }

        /* [KREASI] Tambahan untuk animasi per baris dengan delay */
        .line-wrapper { display: block; /* Memastikan setiap span ada di baris baru */ }
        .line-wrapper.hidden {
            transition-delay: var(--delay, 0s);
        }
        
        /* --- HALAMAN DEPAN (COVER) --- */
        #cover {
            position: relative; height: 100vh;
            display: flex; flex-direction: column; justify-content: flex-end; align-items: center; text-align: center;
            z-index: 10;
        }

        /* [KREASI] Ornamen bunga di cover */
        .cover-ornament {
            position: absolute;
            top: 0; left: 50%;
            transform: translateX(-50%);
            width: clamp(300px, 90vw, 500px);
            opacity: 0;
            animation: fadeInUp 1.5s ease-out 0.3s forwards;
        }

        .background-slider {
            position: absolute; top: 0; left: 0; width: 100%; height: 70vh; overflow: hidden;
            -webkit-mask-image: linear-gradient(to top, transparent 5%, black 40%);
            mask-image: linear-gradient(to top, transparent 5%, black 40%);
        }
        .slide {
            position: absolute; width: 100%; height: 100%; background-size: cover; background-position: center 30%; background-image: var(--bg-image);
            opacity: 0; animation: fade-in-out 12s infinite;
        }
        .slide:nth-child(1) { animation-delay: 0s; }
        .slide:nth-child(2) { animation-delay: 4s; }
        .slide:nth-child(3) { animation-delay: 8s; }

        .cover-content {
            z-index: 2; padding: 20px;
            padding-bottom: 12vh; 
            width: 100%; display: flex; flex-direction: column; align-items: center;
        }
        .cover-content > * { opacity: 0; animation: fadeInUp 1s ease-out forwards; }
        .cover-content h1 { font-family: var(--font-display); font-size: clamp(2.5rem, 10vw, 3.5rem); margin: 0 0 5px 0; color: var(--color-gold); font-weight: 600; animation-delay: 0.5s; }
        .cover-content .date { margin: 4px 0; font-size: 0.9rem; animation-delay: 0.7s; } /* Teks tanggal di cover */
        /* [KREASI] Styling untuk "Kepada Yth" */
        .recipient-box {
            margin-top: 25px;
            padding: 8px 20px;
            border: 1px solid rgba(74, 74, 74, 0.3);
            border-radius: 8px;
            animation-delay: 0.9s;
        }
        .recipient-box p { margin: 0; font-size: 0.95rem; line-height: 1.6; }
        #open-invitation {
            background-color: var(--color-green); color: white; border: none; padding: 10px 30px; border-radius: 50px; font-family: var(--font-body); font-size: 0.95rem; cursor: pointer;
            margin-top: 30px;
            transition: background-color 0.3s, transform 0.2s;
            animation: shine 3s infinite, fadeInUp 1s ease-out 1.1s forwards;
        }
        #cover.opened #open-invitation { display: none; }
        #open-invitation:hover { background-color: var(--color-dark-green); transform: scale(1.05); animation-play-state: paused; }

        /* --- KONTEN UTAMA --- */
        #main-content { 
            display: none; /* [PERBAIKAN] Sembunyikan konten utama secara default */
            max-width: 700px; margin: 0 auto; padding: 5vh 25px; text-align: center; 
            position: relative; /* [PERBAIKAN] Diperlukan agar ornamen tidak terpotong */ }
        .section { margin-bottom: 12vh; }
        .section { position: relative; } /* Penting: Membuat section menjadi positioned parent untuk absolute children */
        #main-content p { line-height: 1.8; font-size: clamp(1.05rem, 2.5vw, 1.15rem); }

        .section h2 {
            font-family: var(--font-nama);
            font-size: clamp(3.2rem, 13vw, 4.5rem);
            color: var(--color-gold);
            font-weight: 400;
            margin: 10px 0 20px 0;
        }

        /* [KREASI] Latar belakang khusus untuk bagian tertentu */
        #kutipan, #rsvp, #countdown-section, #galeri {
            padding-top: 5vh;
            padding-bottom: 5vh; 
            /* Hapus margin negatif yang berisiko menyebabkan overflow */
            margin-left: calc(-1 * 25px);
            margin-right: calc(-1 * 25px);
            padding-left: 25px; 
            padding-right: 25px; 
        }
        #kutipan {
            /* [PERUBAHAN] Latar belakang abu-abu dibuat lebih terasa */
            background-color: #f0f0f0;
        }
        #rsvp {
            /* [PERUBAHAN] Latar belakang diubah menjadi coklat krem lembut */
            background-color: #FBF9F6; 
        }
        #galeri {
            background-color: #f0f0f0; /* [PENAMBAHAN] Latar belakang abu-abu untuk galeri */
        }

        .section h2 {
            font-family: var(--font-nama);
            font-size: clamp(3.2rem, 13vw, 4.5rem);
            color: var(--color-gold);
            font-weight: 400;
            margin: 10px 0 20px 0;
        }

        .salam { 
            font-family: var(--font-display); 
            font-weight: 400; 
            margin-bottom: 1.5rem;
        }
        
        .name {
            font-family: var(--font-nama); font-size: clamp(2.1rem, 8vw, 2.8rem); color: var(--color-gold); margin-top: 15px; font-weight: 400;
            text-shadow: 0 2px 10px rgba(181, 154, 117, 0.3);
        }

        .profile-pic-container {
            position: relative;
            height: clamp(320px, 85vw, 420px);
            margin: 20px auto; /* [PENYESUAIAN] Mengurangi margin atas dan bawah */
            /* [PENYESUAIAN] Hapus transisi karena bingkai dihilangkan */
            /* transition: transform 0.4s ease; */
        }
        .profile-pic { 
            /* [PERBAIKAN] Mengubah object-fit agar gambar tidak terpotong */
            width: 100%; height: 100%; 
            object-fit: contain; 
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
        }
        .frame-overlay {
            position: absolute;
            inset: 0;
            width: 100%; height: 100%;
            pointer-events: none; /* Agar tidak menghalangi interaksi dengan elemen di belakangnya */
        }
        
        .parents { font-family: var(--font-display); font-weight: 700; font-size: clamp(1.3rem, 5vw, 1.6rem); margin-top: 10px; line-height: 1.7; }
        .quote {
            margin-top: 40px; padding: 25px; background-color: var(--color-off-white);
            border-left: 4px solid var(--color-gold); font-style: italic; text-align: left;
            box-shadow: 0 10px 30px rgba(0,0,0,0.04);
        }
        .quote p:first-of-type {
            font-family: var(--font-display);
            font-style: italic;
        }
        .quote-source {
            font-style: normal; display: block;
        }
        .quote-translation { margin-top: 15px; font-style: normal; }
        
        /* [KREASI] Desain Kartu Acara dengan Gradasi DAN Bilah Vertikal */
        .event-card-new {
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            background-color: var(--color-off-white);
            text-align: left;
        }
        .event-card-image-wrapper {
            position: relative;
        }
        .event-card-image-wrapper img {
            width: 100%; height: 250px; object-fit: cover; display: block; /* Gambar di kartu acara */
        }
        /* Gradasi ditaruh di sini */
        .event-card-image-wrapper::after {
            content: '';
            position: absolute;
            bottom: 0; left: 0;
            width: 100%; height: 50%;
            background: linear-gradient(to top, var(--color-off-white), transparent);
        }
        .event-content-wrapper {
            display: flex;
        }
        .event-sidebar {
            background-color: var(--color-green);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px 15px;
            flex-shrink: 0;
        }
        .vertical-text {
            writing-mode: vertical-rl;
            transform: rotate(180deg);
            color: white;
            font-family: var(--font-body), sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            letter-spacing: 10px;
            text-transform: uppercase;
        }
        .event-details-main {
            padding: 25px;
            width: 100%;
        }
        .date-section { display: flex; align-items: center; gap: 15px; }
        .date-number { font-family: var(--font-display); font-weight: 700; font-size: 4rem; line-height: 1; color: var(--color-text); } /* Angka tanggal di kartu */
        .date-text { font-size: clamp(1rem, 3vw, 1.1rem); line-height: 1.5; } /* Hari, bulan, tahun di kartu */
        .event-details-main hr { border: none; height: 1px; background-color: #ddd; margin: 20px 0; }
        .event-details-main p { margin: 5px 0; font-size: 0.95rem; } /* Waktu dan lokasi di kartu */
        .location-label { font-size: 0.85rem; color: #888; }
        .map-button-outline { /* Tombol peta lokasi */
            display: inline-block; background-color: transparent; color: var(--color-dark-green);
            border: 1px solid var(--color-dark-green); padding: 10px 25px; border-radius: 50px;
            text-decoration: none; margin-top: 20px; transition: background-color 0.3s, color 0.3s; font-weight: 600;
        }
        .map-button-outline:hover { background-color: var(--color-dark-green); color: white; }

        .countdown {
            display: grid; grid-template-columns: repeat(4, 1fr);
            gap: 15px; margin-top: 30px;
            font-family: var(--font-display);
        }
        .countdown div {
            background-color: var(--color-green);
            border: 1px solid var(--color-dark-green);
            border-radius: 15px; padding: 15px 10px; text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
        }
        .countdown div:hover {
            transform: translateY(-5px);
        }
        .countdown div span { display: block; font-size: clamp(1.8rem, 7vw, 2.5rem); font-weight: 600; color: white; line-height: 1.1; }
        .countdown div small { display: block; font-size: clamp(0.75rem, 2vw, 0.85rem); color: rgba(255, 255, 255, 0.8); margin-top: 5px; letter-spacing: 1px; text-transform: uppercase; }
        @media (max-width: 600px) {
            .countdown { gap: 10px; }
        }
        #countdown h3 {
            grid-column: 1 / -1; font-family: var(--font-display); font-weight: 600; color: var(--color-dark-green);
        }

        /* [PEROMBAKAN] Desain baru untuk Galeri Foto - Film Strip Vertikal */
        .gallery-film-strip {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            margin-top: 20px;
        }
        .gallery-film-strip .gallery-item {
            width: 85%;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
        }
        .gallery-film-strip .gallery-item img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1);
        }
        .gallery-film-strip .gallery-item:hover img {
            transform: scale(1.05);
        }
        .gallery-film-strip .gallery-item:nth-child(even) {
            margin-left: auto;
            margin-right: 0;
        }
        .gallery-film-strip .gallery-item:nth-child(odd) {
            margin-right: auto;
            margin-left: 0;
        }

        /* [PEROMBAKAN] Desain baru untuk Slider Momen - Tumpukan Kartu 3D */
        .moments-card-stack {
            position: relative;
            width: 100%;
            height: 450px; /* Beri tinggi tetap untuk tumpukan */
            margin-top: 2rem;
            perspective: 1000px;
        }
        .moments-card-stack .card {
            position: absolute;
            width: 80%;
            height: 90%;
            left: 10%;
            top: 5%;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.5s ease, opacity 0.5s ease;
            will-change: transform, opacity;
        }
        .moments-card-stack .card img {
            width: 100%;
            height: 100%;
            aspect-ratio: 4 / 5; object-fit: cover;
        }

        .video-container {
            position: relative; padding-bottom: 56.25%; height: 0;
            overflow: hidden; border-radius: 10px; margin-top: 20px; background-color: #000;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
        
        .family-name {
            font-family: var(--font-body);
            font-size: 1.3rem;
            margin-top: 20px;
            letter-spacing: 1px;
        }
        
        .divider {
            height: 50px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 100'%3E%3Cpath fill='%23B59A75' d='M256 62.5c-5.3 0-10.4-1-15.2-2.9-4.8-1.9-9.1-4.7-12.8-8.3-3.7-3.7-6.5-7.9-8.3-12.8-1.9-4.8-2.9-9.9-2.9-15.2s1-10.4 2.9-15.2c1.9-4.8 4.7-9.1 8.3-12.8 3.7-3.7 7.9-6.5 12.8-8.3C245.6 1 250.7 0 256 0s10.4 1 15.2 2.9c4.8 1.9 9.1 4.7 12.8 8.3 3.7 3.7 6.5 7.9 8.3 12.8 1.9 4.8 2.9 9.9 2.9 15.2s-1 10.4-2.9 15.2c-1.9 4.8-4.7 9.1-8.3 12.8-3.7 3.7-7.9 6.5-12.8 8.3-4.8 1.9-9.9 2.9-15.2 2.9zM512 48H322c-11 0-21.4 3.3-30.2 9.4-4.2 2.9-8.8 4.6-13.6 5.2-1 .1-2.1.2-3.2.2s-2.2-.1-3.2-.2c-4.8-.6-9.4-2.3-13.6-5.2C249.4 51.3 239 48 228 48H0v4h228c11.4 0 22.2 3.5 31.4 10.1 4.2 2.9 8.8 4.6 13.6 5.2 1 .1 2.1.2 3.2.2s2.2-.1 3.2-.2c4.8-.6 9.4-2.3 13.6-5.2C291.8 55.5 302.6 52 314 52h198v-4z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center;
            margin: 3rem 0;
            background-size: contain;
        }

        #music-toggle {
            position: fixed; bottom: 20px; right: 20px; z-index: 99;
            width: 50px; height: 50px; background-color: var(--color-green);
            color: white; border-radius: 50%; display: none; align-items: center; justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); cursor: pointer; border: 2px solid white; transition: transform 0.3s ease, opacity 0.3s ease;
        }
        #music-toggle.show { display: flex; }
        #music-toggle.playing .icon { animation: spin 4s linear infinite; }
        #music-toggle .icon-pause { display: none; }
        #music-toggle.playing .icon-pause { display: block; }
        #music-toggle.playing .icon-play { display: none; }
    </style>

    <!-- [KREASI] CSS untuk RSVP -->
    <style>
        .rsvp-form {
            /* Hapus background dan shadow untuk tampilan yang lebih terintegrasi */
            /* background-color: var(--color-off-white); */
            /* box-shadow: 0 10px 30px rgba(0,0,0,0.08); */
            padding: 10px 0;
            border-radius: 20px;
            text-align: left;
            margin-top: 20px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            /* Tambahkan garis pemisah antar grup */
            padding-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }
        .form-group:last-of-type {
            border-bottom: none; /* Hapus border pada grup terakhir */
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--color-dark-green);
        }
        .form-group input[type="text"],
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--color-gold); /* [PERUBAHAN] Mengubah warna border menjadi gold */
            border-radius: 8px;
            font-family: var(--font-body);
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .form-group input[type="text"]:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--color-gold);
            box-shadow: 0 0 0 4px rgba(181, 154, 117, 0.2); /* [PERUBAHAN] Efek fokus menjadi gold */
        }
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        .rsvp-button {
            width: 100%;
            background: linear-gradient(145deg, var(--color-green), var(--color-dark-green));
            color: white;
            border: none;
            padding: 15px;
            border-radius: 50px;
            font-family: var(--font-body);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }
        .rsvp-button:hover {
            transform: scale(1.02);
        }
        .rsvp-button {
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }

        /* [KREASI] Perbaikan form agar tidak zoom di iPhone dan tampilan lebih baik */
        .form-group input[type="text"],
        .form-group textarea,
        .form-group select {
            font-size: 16px; /* WAJIB 16px agar tidak auto-zoom di iOS */
        }

        /* [KREASI] Tombol pilihan kehadiran yang lebih modern */
        .kehadiran-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            border: 1px solid var(--color-gold); /* [PERUBAHAN] Mengubah warna border menjadi gold */
            border-radius: 8px;
            overflow: hidden;
        }
        .kehadiran-options label {
            text-align: center;
            padding: 12px;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            margin: 0;
            font-weight: 500;
            color: var(--color-text);
        }
        .kehadiran-options input[type="radio"] {
            display: none; /* Sembunyikan radio button asli */
        }
        .kehadiran-options input[type="radio"]:checked + label {
            background-color: var(--color-green);
            color: white;
            font-weight: 600;
        }

        /* [KREASI BARU] Desain baru untuk detail acara yang lebih berkelas */
        .event-details-premium {
            position: relative;
            margin-top: 2rem;
            padding: 3rem 2rem;
            border-radius: 20px;
            overflow: hidden;
            color: white;
            text-shadow: 0 2px 10px rgba(0,0,0,0.4);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }
        .event-details-premium::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image: url('https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01515-min.webp');
            background-size: cover;
            background-position: center;
            transform: scale(1.1);
            filter: brightness(0.5) blur(2px);
            z-index: -1;
        }
        .event-details-premium h3 {
            font-family: var(--font-display);
            font-size: 1.2rem;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: rgba(255,255,255,0.8);
            margin: 0 0 0.5rem 0;
        }
        .event-details-premium p {
            font-family: var(--font-body);
            font-size: 1.5rem;
            font-weight: 500;
            margin: 0;
            line-height: 1.4;
        }
        .event-details-premium .event-date-large {
            font-family: var(--font-display);
            font-size: clamp(3rem, 15vw, 4.5rem);
            font-weight: 700;
            line-height: 1;
            margin-bottom: 1rem;
        }
        .event-details-premium .event-month-year {
            display: block;
            font-size: 1.2rem;
            font-weight: 500;
        }
        .event-details-premium hr {
            border: none;
            height: 1px;
            background-color: rgba(255,255,255,0.2);
            margin: 2rem 0;
        }


        /* [KREASI] CSS untuk Galeri Ucapan */
        .wishes-gallery {
            margin-top: 20px;
            max-height: 450px; /* Batasi tinggi agar tidak terlalu panjang */
            overflow-y: auto; /* Aktifkan scroll jika konten melebihi tinggi */
            padding: 15px 5px;
            /* Hapus background dari sini karena sudah ada di container */
        }
        /* Scrollbar kustom untuk galeri ucapan */
        .wishes-gallery::-webkit-scrollbar {
            width: 6px;
        }
        .wishes-gallery::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
        }
        .wishes-gallery::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 10px;
        }
        .wishes-gallery::-webkit-scrollbar-thumb:hover {
            background: #aaa;
        }
        /* [KREASI] Desain Gelembung Chat untuk Ucapan */
        .wish-card {
            background-color: var(--color-off-white);
            color: var(--color-text);
            padding: 15px 20px;
            border-radius: 20px 20px 20px 5px; /* Bentuk gelembung yang lebih organik */
            margin-bottom: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.06);
            text-align: left;
            opacity: 0; /* Mulai dengan transparan untuk animasi */
            transform: translateY(20px);
            animation: fadeInUp 0.5s ease-out forwards;
            position: relative;
            max-width: 90%;
            margin-left: 0;
            border: 1px solid #EAE8E1;
        }
        .wish-card::before {
            content: "";
            position: absolute;
            bottom: -1px; left: -10px;
            border: 12px solid transparent; border-bottom-color: #EAE8E1;
        }
        .wish-card p {
            margin: 0;
            font-size: 0.95rem;
            line-height: 1.6;
            position: relative; /* Diperlukan untuk posisi tanda kutip */
            padding-left: 1.5em; /* Beri ruang untuk tanda kutip pembuka */
        }
        /* [KREASI] Tambahkan tanda kutip pada ucapan */
        .wish-card p::before {
            content: 'â€œ';
            position: absolute;
            left: 0;
            top: -0.1em;
            font-family: var(--font-display);
            font-size: 2.5em;
            color: rgba(107, 125, 105, 0.3);
            line-height: 1;
        }
        .wish-card .sender-name {
            font-weight: 600;
            color: var(--color-dark-green);
            margin-bottom: 5px;
            display: block;
        }
        #no-wishes-message {
            text-align: center;
            padding: 40px 20px;
            color: #888;
            font-style: italic;
            display: none; /* Sembunyikan secara default */
        }
    </style>
    <!-- [KREASI] CSS untuk Fitur Kado Online -->
    <style>
        .gift-card {
            background: linear-gradient(135deg, var(--color-dark-green), var(--color-green));
            color: white;
            border-radius: 20px;
            padding: 25px;
            text-align: left;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }
        .gift-card::after {
            content: '';
            position: absolute;
            top: -50px; right: -50px;
            width: 150px; height: 150px;
            background-color: rgba(255,255,255,0.05);
            border-radius: 50%;
        }
        .gift-card p {
            margin: 0;
            color: rgba(255,255,255,0.9);
        }
        .bank-logo {
            max-height: 25px;
            margin-bottom: 15px;
        }
        .account-number {
            font-family: var(--font-display);
            font-size: 1.8rem;
            font-weight: 600;
            letter-spacing: 2px;
            margin: 5px 0 5px 0;
            color: white;
        }
        .copy-button {
            background-color: rgba(255,255,255,0.9);
            color: var(--color-dark-green);
            border: none;
            padding: 10px 20px; /* Tombol salin rekening */
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px; 
            transition: background-color 0.3s, transform 0.2s;
        }
        .copy-button:hover { background-color: white; transform: scale(1.05); }
    </style>
    <!-- [KREASI] CSS untuk Ornamen Hiasan -->
    <style>
        .ornament-container {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            overflow: hidden; /* Penting untuk menyembunyikan sebagian ornamen */
            pointer-events: none;
        }
        .ornament-image {
            position: absolute; /* Gambar ornamen */
            z-index: 5;
            width: clamp(100px, 25vw, 200px);
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
            transition: transform 1s cubic-bezier(0.25, 1, 0.5, 1), opacity 1s ease;
        }
        .ornament-right { top: 10vh; right: 0; transform: translateX(50%); opacity: 0; }
        .ornament-left { bottom: 10vh; left: 0; transform: translateX(-50%) scaleX(-1); opacity: 0; }
        .ornament-image.visible {
            transform: translateX(0) scaleX(var(--scale, 1)); opacity: 0.5;
        }

        /* [KREASI] CSS untuk Footer Kredit */
        .creator-credit {
            margin-top: 2rem;
            font-size: 0.9rem;
            color: #888;
        }
        .creator-credit a {
            color: var(--color-dark-green);
            font-weight: 600;
            text-decoration: none;
        }
        .social-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 1rem;
        }
        .social-links a {
            color: var(--color-green);
            transition: color 0.3s, transform 0.3s;
        }
        .social-links a:hover {
            color: var(--color-dark-green);
            transform: scale(1.1);
        }

        /* [KREASI BARU] Kartu pembungkus untuk RSVP dan Galeri Ucapan */
        .rsvp-wishes-container {
            background-color: var(--color-off-white);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            margin-top: 20px;
            border: 1px solid #EAE8E1;
        }
        .rsvp-wishes-container h2 {
            margin-top: 0; /* Hapus margin atas pada judul di dalam kartu */
        }

        .section.visible .ornament-image {
            opacity: 0.5;
            /* [PENYESUAIAN] Kembalikan transform ke posisi normal saat masuk */
            transform: translateX(0) scaleX(var(--scale, 1)); 
        }
    </style>
</head>
<body>

    <!-- [OPTIMASI] Preload musik untuk pemutaran yang lebih cepat -->
    <audio id="background-music" loop preload="auto">
        <source src="https://f.top4top.io/m_315007dq90.mp3" type="audio/mpeg">
    </audio>

    <div id="music-toggle">
        <svg class="icon icon-play" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
        <svg class="icon icon-pause" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
    </div>

    <!-- Menggunakan tag <header> untuk cover depan -->
    <header id="cover">
        <div class="background-slider">
            <div class="slide"></div> <div class="slide"></div> <div class="slide"></div>
        </div>
        <div class="cover-content">
            <h1 id="cover-title"></h1>
            <p class="date" id="cover-date"></p>
            <div class="recipient-box" id="recipient-box">
                <p>Kepada Yth.<br>Bapak/Ibu/Saudara/i<br><strong id="guest-name" style="font-size: 1.1rem; color: var(--color-dark-green);"></strong></p>
            </div>
            <button id="open-invitation">BUKA UNDANGAN</button>
        </div>
    </header>

    <!-- Menggunakan tag <main> untuk konten utama -->
    <main id="main-content">
        
        <section id="pembuka" class="section">
            <!-- [PENAMBAHAN] Gambar Swastika di atas salam pembuka -->
            <div class="hidden anim-zoom-in" style="margin-bottom: 1.5rem;">
                <img src="https://raw.githubusercontent.com/wayanku/undangan-metatah/main/o-swastyastu-1-300x98-1,OM-SANTIH1,swastika12/swastika12.webp" alt="Swastika" style="width: 80px; height: auto;">
            </div>
            <!-- [PENAMBAHAN] Gambar tulisan "Om Swastyastu" -->
            <div class="hidden anim-zoom-in" style="--delay: 0.1s; margin-bottom: 2rem;">
                <img src="https://raw.githubusercontent.com/wayanku/undangan-metatah/main/o-swastyastu-1-300x98-1,OM-SANTIH1,swastika12/o-swastyastu-1-300x98-1.webp" alt="Om Swastyastu" style="width: 220px; height: auto;">
            </div>
            <h2 class="salam hidden anim-zoom-in" style="margin-bottom: 2rem;">Om Swastyastu</h2>
            <p>
                <span class="line-wrapper hidden anim-fade-in-up" style="--delay: 0.1s;">Atas Asung Kertha Wara Nugraha Ida Sang Hyang Widhi Wasa/Tuhan Yang Maha Esa</span>
                <span class="line-wrapper hidden anim-fade-in-up" style="--delay: 0.2s; color: var(--color-dark-green);">kami bermaksud mengundang Bapak/Ibu/Saudara/i pada Upacara Manusa Yadnya</span>
                <span class="line-wrapper hidden anim-fade-in-up" style="--delay: 0.3s;" id="ceremony-subject"></span>
            </p>
        </section>

        <!-- [PERUBAHAN BESAR] Bagian Profil Mempelai Pria -->
        <section id="mempelai-pria" class="section">
            <div class="event-card-new hidden anim-slide-from-left">
                <div class="event-card-image-wrapper">
                    <img src="https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01536-min.webp" alt="Mempelai Pria" id="groom-card-image">
                </div>
                <div class="event-content-wrapper">
                    <div class="event-sidebar">
                        <span class="vertical-text">MEMPELAI PRIA</span>
                    </div>
                    <div class="event-details-main" style="text-align: center;">
                        <h3 class="name" style="margin-top: 0; margin-bottom: 1rem;" id="groom-name"></h3>
                        <div style="color: var(--color-dark-green);">
                            <p style="font-size: clamp(1.1rem, 4vw, 1.2rem); margin-top: 0; margin-bottom: 0.5rem;" id="groom-family-relation"></p>
                            <h3 class="parents" style="font-weight: 600; margin-top: 0;" id="groom-parents-names"></h3>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- [PERUBAHAN BESAR] Bagian Profil Mempelai Wanita -->
        <section id="mempelai-wanita" class="section">
            <div class="event-card-new hidden anim-slide-from-right">
                <div class="event-card-image-wrapper">
                    <img src="https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01578-min.webp" alt="Mempelai Wanita" id="bride-card-image">
                </div>
                <div class="event-content-wrapper">
                    <div class="event-sidebar">
                        <span class="vertical-text">MEMPELAI WANITA</span>
                    </div>
                    <div class="event-details-main" style="text-align: center;">
                        <h3 class="name" style="margin-top: 0; margin-bottom: 1rem;" id="bride-name"></h3>
                        <div style="color: var(--color-dark-green);">
                            <p style="font-size: clamp(1.1rem, 4vw, 1.2rem); margin-top: 0; margin-bottom: 0.5rem;" id="bride-family-relation"></p>
                            <h3 class="parents" style="font-weight: 600; margin-top: 0;" id="bride-parents-names"></h3>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <div class="divider hidden anim-zoom-in"></div>

        <section id="kutipan" class="section hidden anim-fade-in-up">
            <!-- [PERBAIKAN STRUKTUR] Ornamen ditempatkan di dalam section yang relevan -->
            <div class="ornament-container">
                <img src="" alt="Hiasan" class="ornament-image ornament-right" style="--scale: 1;">
            </div>
            <div class="quote" id="quote-block">
                <p class="hidden anim-fade-in-up" id="quote-text"></p>
                <span class="hidden anim-fade-in-up quote-source" style="--delay: 0.2s;" id="quote-source"></span> 
                <p class="hidden anim-fade-in-up quote-translation" style="--delay: 0.4s;" id="quote-translation"></p>
            </div>
        </section>

        <!-- [PERUBAHAN BESAR] Bagian Detail Acara dipecah menjadi dua kartu -->
        <!-- [PERUBAHAN BESAR] Desain baru untuk detail acara yang lebih berkelas -->
        <section id="acara" class="section" style="text-align: center;">
            <h2 class="hidden anim-fade-in-up">Detail Acara</h2>
            <div class="event-details-premium hidden anim-zoom-in" style="--delay: 0.2s;">
                <h3 id="event-day-text"></h3>
                <div class="event-date-large" id="event-date-number"></div>
                <div class="event-month-year" id="event-month-year-text"></div>
                
                <hr>

                <h3>Waktu</h3>
                <p id="event-time-text"></p>

                <hr>

                <h3>Lokasi</h3>
                <p id="event-location-text"></p>
            </div>
            <a href="" target="_blank" class="map-button-outline hidden anim-fade-in-up" id="event-map-link" style="--delay: 0.4s; margin-top: 2rem; background-color: var(--color-green); color: white; border-color: var(--color-green);">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px; vertical-align: middle;"><path d="M1 6v16l7-4 8 4 7-4V2l-7 4-8-4-7 4z"></path><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg>
                <span>Lihat Peta Lokasi</span>
            </a>
        </section>

        <!-- [PEMINDAHAN] Teks penutup sekarang menjadi section tersendiri -->
        <section id="penutup" class="section hidden anim-fade-in-up">
            <!-- [PERBAIKAN STRUKTUR] Ornamen ditempatkan di dalam section yang relevan -->
            <div class="ornament-container">
                <img src="" alt="Hiasan" class="ornament-image ornament-left" style="--scale: -1; bottom: 30vh;" id="ornament-left-2">
            </div>
            <p>
                <span class="line-wrapper hidden anim-fade-in-up" style="--delay: 0.1s;">Merupakan suatu kebahagiaan dan kehormatan bagi kami, apabila Bapak/Ibu/Saudara/i, berkenan hadir untuk memberikan doa restu.</span>
                <span class="line-wrapper hidden anim-fade-in-up" style="--delay: 0.2s;">Atas kehadiran dan doa restunya, kami ucapkan terima kasih.</span>
            </p>
            <!-- [PENAMBAHAN] Gambar tulisan "Om Shanti" -->
            <div class="hidden anim-zoom-in" style="--delay: 0.3s; margin-top: 2rem; margin-bottom: 1.5rem;">
                <img src="https://raw.githubusercontent.com/wayanku/undangan-metatah/main/o-swastyastu-1-300x98-1,OM-SANTIH1,swastika12/OM-SANTIH1.webp" alt="Om Shanti" style="width: 250px; height: auto;">
            </div>
            <h2 class="salam hidden anim-fade-in-up" style="--delay: 0.4s; font-size: 2rem; margin-top: 0; margin-bottom: 1.5rem;">Om Shanti Shanti Shanti Om</h2>
            <p class="hidden anim-fade-in-up" style="--delay: 0.5s; margin-bottom: 0.5rem;">Kami yang berbahagia,</p>
            <p class="family-name hidden anim-fade-in-up" style="--delay: 0.6s; font-size: 1.1rem; margin-top: 0;" id="closing-family-name"></p>
        </section>

        <section id="countdown-section" class="section hidden anim-fade-in-up">
            <h2>Menuju Acara</h2>
            <div id="countdown" class="countdown">
                <div> <span id="days">00</span> <small>Hari</small> </div>
                <div> <span id="hours">00</span> <small>Jam</small> </div>
                <div> <span id="minutes">00</span> <small>Menit</small> </div>
                <div> <span id="seconds">00</span> <small>Detik</small> </div>
            </div>
        </section>

        <section id="galeri" class="section">
            <h2 class="hidden anim-fade-in-up">Foto Galeri</h2>
            <!-- ========================================================== -->
            <!-- ================== GALERI FOTO DIMULAI ================== -->
            <!-- ========================================================== -->
            <!-- [PEROMBAKAN] Galeri foto dengan layout film strip vertikal -->
            <div class="gallery-film-strip hidden" style="--delay: 0.2s;">
                <div class="gallery-item hidden anim-slide-from-left"> <img src="https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01473-min.webp" alt="Galeri Foto 1" loading="lazy"> </div>
                <div class="gallery-item hidden anim-slide-from-right"> <img src="https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01494-min.webp" alt="Galeri Foto 2" loading="lazy"> </div>
                <div class="gallery-item hidden anim-slide-from-left"> <img src="https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01507-min.webp" alt="Galeri Foto 3" loading="lazy"> </div>
                <div class="gallery-item hidden anim-slide-from-right"> <img src="https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01515-min.webp" alt="Galeri Foto 4" loading="lazy"> </div>
                <div class="gallery-item hidden anim-slide-from-left"> <img src="https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01536-min.webp" alt="Galeri Foto 5" loading="lazy"> </div>
            </div>
            <!-- ========================================================== -->
            <!-- =================== GALERI FOTO SELESAI =================== -->
            <!-- ========================================================== -->
        </section>
        
        <section id="momen" class="section">
            <h2 class="hidden anim-fade-in-up">Momen Spesial</h2>
            <!-- [PEROMBAKAN] Slider momen dengan tumpukan kartu 3D -->
            <div class="moments-card-stack hidden anim-zoom-in" id="moments-slider">
                <!-- Diisi oleh JS -->
            </div>
        </section>

        <section id="video" class="section hidden anim-zoom-in">
            <h2>Video</h2>
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/hT0XG2j6wng" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            </div>
        </section>
        
        <section id="hadiah" class="section">
            <h2 class="hidden anim-fade-in-up">Kirim Hadiah</h2>
            <p class="hidden anim-fade-in-up" style="--delay: 0.1s;">Doa restu Anda merupakan karunia yang sangat berarti bagi kami. Namun jika memberi adalah ungkapan tanda kasih, Anda dapat memberi kado secara online.</p>
            <div class="gift-card hidden anim-zoom-in" style="--delay: 0.3s;">
                <p id="bank-name"></p>
                <h3 class="account-number" id="account-number"></h3>
                <p id="account-name"></p>
                <p style="margin-top: 20px;">No. Rekening:</p>
                <button class="copy-button" id="copy-account-button">
                    <span>Salin Rekening</span>
                </button>
            </div>
        </section>

        <section id="rsvp" class="section">

            <h2 class="hidden anim-fade-in-up" style="font-family: var(--font-nama); font-size: clamp(3.2rem, 13vw, 4.5rem);">Konfirmasi Kehadiran</h2>
            <!-- [KREASI BARU] Pembungkus untuk form dan galeri ucapan -->
            <div class="rsvp-wishes-container hidden anim-zoom-in" style="--delay: 0.2s;">
                <form id="rsvp-form" class="rsvp-form">
                <div class="form-group">
                    <label for="nama">Nama Anda</label>
                    <input type="text" id="nama" name="nama" placeholder="Tuliskan nama Anda" required>
                </div>
                <div class="form-group">
                    <fieldset style="border: none; padding: 0; margin: 0;">
                        <legend style="padding: 0; margin-bottom: 8px; font-weight: 600; color: var(--color-dark-green);">Konfirmasi Kehadiran</legend>
                        <!-- [KREASI] Mengganti <select> dengan radio button yang lebih modern -->
                        <div class="kehadiran-options">
                            <input type="radio" id="hadir" name="kehadiran" value="Hadir" required>
                            <label for="hadir">Hadir</label>

                            <input type="radio" id="tidak-hadir" name="kehadiran" value="Tidak Hadir">
                            <label for="tidak-hadir">Tidak Hadir</label>
                        </div>
                    </fieldset>
                </div>
                <div class="form-group" id="jumlah-tamu-group" style="display: none;">
                    <label for="jumlah">Jumlah Tamu (termasuk Anda)</label>
                    <select id="jumlah" name="jumlah">
                        <option value="1">1 Orang</option>
                        <option value="2">2 Orang</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="ucapan">Ucapan & Doa</label>
                    <textarea id="ucapan" name="ucapan" placeholder="Tuliskan ucapan dan doa Anda di sini..." required></textarea>
                </div>
                <button type="submit" class="rsvp-button">
                    <span>Kirim Konfirmasi</span>
                    <svg class="icon-send feather feather-send" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                </button>
                <p id="form-status" style="text-align: center; margin-top: 15px;"></p>
                </form>

            </div>

            <!-- [PENYESUAIAN] Galeri Ucapan dipindahkan ke luar kartu -->
            <div id="wishes-gallery-container" class="hidden anim-fade-in-up" style="margin-top: 40px; display: none; --delay: 0.4s;">
                <h2 style="font-family: var(--font-nama); font-size: clamp(3.2rem, 13vw, 4.5rem);">Ucapan & Doa</h2>
                <p id="no-wishes-message">Jadilah yang pertama mengirim ucapan!</p>
                <div id="wishes-gallery" class="wishes-gallery"></div>
            </div>
        </section>

        <div class="divider hidden anim-zoom-in"></div>

        <!-- Menggunakan tag <footer> untuk bagian penutup -->
        <!-- Teks penutup sudah dipindahkan ke dalam kartu acara -->
        <footer class="section" style="margin-bottom: 5vh;">
            <div class="hidden anim-fade-in-up">
                <h2 style="font-family: var(--font-nama); font-size: clamp(3.2rem, 13vw, 4.5rem); margin-bottom: 0;">Matur Suksma</h2>
                <div class="creator-credit" id="creator-credit">
                    <!-- Diisi oleh JS -->
                </div>
                <div class="social-links">
                    <a href="" target="_blank" title="Instagram" id="instagram-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
                    </a>
                    <a href="" target="_blank" title="WhatsApp" id="whatsapp-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>
                    </a>
                </div>
            </div>
        </footer>

    </main>

    <!-- =============================================================================== -->
    <!-- ================== [ PUSAT KONTROL DATA UNDANGAN ] ================== -->
    <!-- =============================================================================== -->
    <!-- Untuk membuat undangan baru, cukup ubah data di bawah ini. -->
    <!-- Tampilan di atas akan otomatis menyesuaikan. -->
    <!-- =============================================================================== -->
    <script>
        const invitationData = {
            // --- DATA UTAMA ---
            groom: {
                name: "Agus Surya Adnyana",
                familyRelation: "Putra pertama dari pasangan",
                father: "I Wayan Sarga",
                mother: "Ni Ketut Sutarmi"
            },
            bride: {
                name: "Luh Swasti",
                familyRelation: "Putri kedua dari pasangan",
                father: "I Ketut Regug",
                mother: "Ni Wayan Rasti"
            },
            ceremony: {
                // Ganti subjek acara menjadi pernikahan
                subject: "Upacara Pawiwahan (Pernikahan) putra-putri kami."
            },
            parents: {
                father: "I Made Mawa",
                mother: "Ni Nyoman Muliani",
            },
            event: {
                // Format: "Bulan Hari, Tahun Jam:Menit:Detik" (Bulan dalam Bahasa Inggris)
                dateTime: "Oct 3, 2025 16:00:00", 
                day: "Jumat",
                date: "3",
                month: "Oktober",
                year: "2025",
                time: "16.00 WITA - Selesai",
                location: "jln trengguli no 29, Penatih, Denpasar Timur",
                mapUrl: "https://maps.app.goo.gl/w3KEm4DuuEKaQvMp8?g_st=ipc"
            },
            // --- DATA PENDUKUNG ---
            gift: {
                bankName: "Bank BNI", // Nama bank ditambahkan di sini
                accountNumber: "1920902971",
                accountName: "a.n. Ni Made Ayu Handayani"
            },
            quote: {
                text: `"Devan bhavayatanena te deva bhavayantu vah parasparam bhavayantah sreyah param avapsyatha"`,
                source: "(Bhagavad Gita 3:11)",
                translation: "Dengan ini (Yadnya), kami berbakti kepada Hyang Widhi dan dengan ini pula Hyang Widhi memelihara dan mengasihi kamu. Dengan saling memelihara satu sama lain, kamu akan mencapai kebaikan yang maha tinggi."
            },
            // ==========================================================
            // ================== PERUBAHAN LINK GAMBAR =================
            // ==========================================================
            images: {
                // Gambar untuk ikon tab browser dan tampilan di WhatsApp
                favicon: "https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01507-min.webp",
                ogImage: "https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01507-min.webp",
                // Foto profil utama (tetap)
                // Tiga gambar untuk slider di sampul depan
                coverSlides: [
                    "https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01473-min.webp",
                    "https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01515-min.webp",
                    "https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01706-min.webp"
                ],
                // Gambar untuk kartu detail acara
                eventCard: "https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01494-min.webp",
                gallery: [
                    // URL gambar untuk galeri foto diisi langsung di HTML untuk kontrol layout yang lebih baik.
                ],
                // Gambar untuk slider "Momen Spesial"
                moments: [
                    "https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01706-min.webp",
                    "https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01741-min.webp",
                    "https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01752-min.webp",
                    "https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01536-min.webp",
                    "https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01578-min.webp",
                    "https://raw.githubusercontent.com/wayanku/undangan-metatah/main/compressed/DSC01588-min.webp"
                ],
                // Ornamen (tetap)
                ornament: "https://raw.githubusercontent.com/wayanku/undangan-metatah/main/tl.webp"
            },
            // --- INFO PEMBUAT & SOSIAL MEDIA ---
            creator: {
                name: "Story Bali Undangan",
                instagram: "https://www.instagram.com/storybali?",
                tiktok: "https://www.tiktok.com/@storybali.undangan",
                whatsapp: "https://wa.me/message/RNPBCG25N5V2A1" // Ganti dengan nomor Anda
            }
        };

        // Script untuk mengisi data ke HTML secara otomatis
        // [PERBAIKAN] Menggabungkan semua skrip ke dalam satu blok yang terorganisir

        // --- FUNGSI-FUNGSI UTAMA ---

        function getGuestName() {
            const urlParams = new URLSearchParams(window.location.search);
            const guest = urlParams.get('to');
            if (guest) {
                document.getElementById('guest-name').textContent = guest.replace(/\+/g, ' ');
            }
        }

        function startCountdown() {
            const countdownDate = new Date(invitationData.event.dateTime).getTime();
            const countdownEl = document.getElementById("countdown");
            
            const interval = setInterval(function() {
                const now = new Date().getTime();
                const distance = countdownDate - now;

                if (distance < 0) {
                    clearInterval(interval);
                    if(countdownEl) countdownEl.innerHTML = "<h3>Acara Telah Selesai</h3>";
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById("days").innerText = days.toString().padStart(2, '0');
                document.getElementById("hours").innerText = hours.toString().padStart(2, '0');
                document.getElementById("minutes").innerText = minutes.toString().padStart(2, '0');
                document.getElementById("seconds").innerText = seconds.toString().padStart(2, '0');
            }, 1000);
        }

        function observeElements() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Jika elemen masuk ke layar, selalu tambahkan kelas 'visible'
                        entry.target.classList.add('visible');
                    } else {
                        // Jika elemen keluar dari layar, periksa posisinya.
                        // entry.boundingClientRect.top > 0 berarti elemen keluar dari bagian bawah.
                        if (entry.boundingClientRect.top > 0) {
                            // Hapus kelas 'visible' HANYA jika keluar dari bawah (saat scroll ke atas)
                            entry.target.classList.remove('visible');
                        }
                    }
                });
            }, { threshold: 0.01 }); // threshold kecil agar animasi cepat terpicu

            document.querySelectorAll('.hidden').forEach(el => observer.observe(el));
        }

        // [PEROMBAKAN] Fungsi baru untuk slider tumpukan kartu 3D
        function setupCardStackSlider() {
            const stack = document.getElementById('moments-slider');
            if (!stack) return;

            let cards = Array.from(stack.children);
            if (cards.length === 0) return;

            const updateStack = () => {
                cards.forEach((card, index) => {
                    const depth = cards.length - 1 - index;
                    const scale = 1 - (depth * 0.05);
                    const translateY = -depth * 10;
                    const translateZ = -depth * 50;
                    const opacity = (depth < 3) ? 1 : 0; // Hanya tampilkan 3 kartu teratas

                    card.style.transform = `scale(${scale}) translateY(${translateY}px) translateZ(${translateZ}px)`;
                    card.style.zIndex = index;
                    card.style.opacity = opacity;
                });
            };

            const cycleCards = () => {
                const topCard = cards.pop(); // Ambil kartu paling atas
                topCard.style.transform = `translateX(150%) rotate(15deg)`; // Animasi keluar
                
                setTimeout(() => {
                    cards.unshift(topCard); // Pindahkan ke paling bawah
                    topCard.style.transition = 'none'; // Hapus transisi sementara
                    updateStack(); // Perbarui tumpukan
                    setTimeout(() => topCard.style.transition = '', 50); // Kembalikan transisi
                }, 500);
            };

            stack.addEventListener('click', cycleCards);
            updateStack(); // Inisialisasi posisi kartu
        }

        async function loadWishes() {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbz2_Ll9pbZ7t0zGykTfwL_aKYHiCknnpNVeVHosnNs9iSCj6M2-N9T2heuXgK14cTs/exec';
            const wishesContainer = document.getElementById('wishes-gallery');
            const noWishesMessage = document.getElementById('no-wishes-message');
            const galleryContainer = document.getElementById('wishes-gallery-container');
            
            try {
                const response = await fetch(scriptURL);
                const result = await response.json();

                galleryContainer.style.display = 'block';

                if (result.result === 'success' && result.data.length > 0) {
                    wishesContainer.style.display = 'block';
                    noWishesMessage.style.display = 'none';
                    wishesContainer.innerHTML = '';

                    result.data.forEach((wish, index) => {
                        const card = document.createElement('div');
                        card.className = 'wish-card';
                        card.style.animationDelay = `${index * 0.1}s`;

                        const sender = document.createElement('span');
                        sender.className = 'sender-name';
                        sender.textContent = wish.nama;

                        const message = document.createElement('p');
                        message.textContent = `"${wish.ucapan}"`;

                        card.appendChild(sender);
                        card.appendChild(message);
                        wishesContainer.appendChild(card);
                    });
                } else {
                    wishesContainer.style.display = 'none';
                    noWishesMessage.style.display = 'block';
                }
            } catch (error) {
                console.error('Error fetching wishes!', error.message);
            }
        }

        // --- EKSEKUSI SAAT HALAMAN DIMUAT ---

        document.addEventListener('DOMContentLoaded', function() {
            const data = invitationData;

            // --- Mengisi Data Teks ---
            document.getElementById('cover-title').textContent = `Undangan Metatah`;
            document.getElementById('cover-date').textContent = `${data.event.day}, ${data.event.date} ${data.event.month} ${data.event.year}`;
            document.getElementById('ceremony-subject').textContent = data.ceremony.subject;
            
            // Mengisi data Mempelai Pria
            document.getElementById('groom-name').textContent = data.groom.name;
            document.getElementById('groom-family-relation').textContent = data.groom.familyRelation;
            document.getElementById('groom-parents-names').innerHTML = `Bapak ${data.groom.father}<br>&<br>Ibu ${data.groom.mother}`;

            // Mengisi data Mempelai Wanita
            document.getElementById('bride-name').textContent = data.bride.name;
            document.getElementById('bride-family-relation').textContent = data.bride.familyRelation;
            document.getElementById('bride-parents-names').innerHTML = `Bapak ${data.bride.father}<br>&<br>Ibu ${data.bride.mother}`;

            document.getElementById('closing-family-name').textContent = `Kel. Bapak ${data.groom.father} & Kel. Bapak ${data.bride.father}`;
            document.getElementById('quote-source').textContent = data.quote.source;
            document.getElementById('quote-translation').textContent = data.quote.translation;

            // Mengisi data untuk detail acara resepsi (desain premium)
            document.getElementById('event-day-text').textContent = data.event.day;
            document.getElementById('event-date-number').textContent = data.event.date;
            document.getElementById('event-month-year-text').textContent = `${data.event.month} ${data.event.year}`;
            document.getElementById('event-time-text').textContent = data.event.time;
            document.getElementById('event-location-text').textContent = data.event.location;
            document.getElementById('event-map-link').href = data.event.mapUrl;

            document.getElementById('bank-name').textContent = data.gift.bankName;
            document.getElementById('account-number').textContent = data.gift.accountNumber;
            document.getElementById('account-name').textContent = data.gift.accountName;

            document.getElementById('creator-credit').innerHTML = `Made with â™¡ by <a href="${data.creator.instagram}" target="_blank">${data.creator.name}</a>`;
            document.getElementById('instagram-link').href = data.creator.instagram;
            document.getElementById('whatsapp-link').href = data.creator.whatsapp;

            // --- Mengisi Gambar ---
            document.querySelector('link[rel="icon"]').href = data.images.favicon;
            document.getElementById('meta-og-image').content = data.images.ogImage;
            document.querySelectorAll('.ornament-image').forEach(img => img.src = data.images.ornament);
            document.querySelectorAll('.slide').forEach((slide, index) => {
                slide.style.backgroundImage = `url('${data.images.coverSlides[index]}')`;
            });

            // --- MENGATUR EVENT LISTENERS DAN FUNGSI LAINNYA ---

            const openButton = document.getElementById('open-invitation');
            const html = document.documentElement;
            const cover = document.getElementById('cover');
            const body = document.body;
            const music = document.getElementById('background-music');
            const musicToggle = document.getElementById('music-toggle');
            const mainContent = document.getElementById('main-content');

            getGuestName();

            if ('scrollRestoration' in history) {
                history.scrollRestoration = 'manual';
            }
            window.scrollTo(0, 0);

            openButton.addEventListener('click', function() {
                cover.classList.add('opened');
                html.style.overflowY = 'auto';
                body.style.overflowY = 'auto';
                mainContent.style.display = 'block';
                mainContent.scrollIntoView({ behavior: 'smooth' });

                music.play().catch(error => console.log("Autoplay dicegah oleh browser."));
                musicToggle.classList.add('show', 'playing');

                // [OPTIMASI] Panggil observer setelah halaman dibuka
                observeElements();
            });

            musicToggle.addEventListener('click', function() {
                if (music.paused) {
                    music.play(); this.classList.add('playing');
                } else {
                    music.pause(); this.classList.remove('playing');
                }
            });

            const copyButton = document.getElementById('copy-account-button');
            copyButton.addEventListener('click', function() {
                navigator.clipboard.writeText(data.gift.accountNumber.replace(/\s/g, '')).then(() => {
                    const originalText = this.innerHTML;
                    this.innerHTML = '<span>Berhasil Disalin!</span>';
                    this.style.backgroundColor = '#c8e6c9';
                    setTimeout(() => {
                        this.innerHTML = originalText;
                        this.style.backgroundColor = '';
                    }, 2000);
                }).catch(err => console.error('Gagal menyalin: ', err));
            });

            const rsvpForm = document.getElementById('rsvp-form');
            const kehadiranOptions = document.querySelectorAll('input[name="kehadiran"]');
            const jumlahTamuGroup = document.getElementById('jumlah-tamu-group');
            
            kehadiranOptions.forEach(option => {
                option.addEventListener('change', function() {
                    jumlahTamuGroup.style.display = (this.value === 'Hadir') ? 'block' : 'none';
                });
            });

            rsvpForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                const scriptURL = 'https://script.google.com/macros/s/AKfycbz2_Ll9pbZ7t0zGykTfwL_aKYHiCknnpNVeVHosnNs9iSCj6M2-N9T2heuXgK14cTs/exec';
                const formButton = this.querySelector('.rsvp-button');
                const buttonText = formButton.querySelector('span');
                const formStatus = document.getElementById('form-status');

                formButton.disabled = true;
                buttonText.textContent = 'Mengirim...';
                formStatus.textContent = '';

                try {
                    const response = await fetch(scriptURL, { method: 'POST', body: new FormData(this)});
                    const result = await response.json();

                    if (result.result === 'success') {
                        console.log('Success!', result);
                        formStatus.textContent = 'Terima kasih, konfirmasi Anda telah terkirim!';
                        formStatus.style.color = 'var(--color-green)';
                        rsvpForm.reset();
                        jumlahTamuGroup.style.display = 'none';
                        await loadWishes();
                    } else {
                        throw new Error(result.message || 'Terjadi kesalahan saat mengirim data.');
                    }
                } catch (error) {
                    console.error('Error!', error.message);
                    formStatus.textContent = 'Gagal mengirim konfirmasi. Silakan coba lagi.';
                    formStatus.style.color = 'red';
                } finally {
                    formButton.disabled = false;
                    buttonText.textContent = 'Kirim Konfirmasi';
                }
            });

            // [OPTIMASI] Pindahkan pengisian slider momen ke sini agar lebih terpusat
            const momentsContainer = document.getElementById('moments-slider');
            if (momentsContainer) {
                const momentsHTML = data.images.moments.map(url => 
                    `<div class="card"><img src="${url}" alt="Momen" loading="lazy"></div>`
                ).join('');
                momentsContainer.innerHTML = momentsHTML;
            }
            // Panggil fungsi-fungsi yang perlu berjalan saat halaman dimuat
            startCountdown();
            setupCardStackSlider(); // Panggil fungsi slider baru
            loadWishes();
        });
    </script>
</body>
</html>
